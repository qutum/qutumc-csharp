<!--
Copyright 2008-2025 Qianyan Cai
Under the terms of the Creative Commons BY-SA 4.0 http://creativecommons.org/licenses/by-sa/4.0/deed.en
http://qutum.com  http://qutum.cn
-->

## qutum.parser.LerStr

读取string，产出char流

## qutum.parser.LerByte

读取byte流，产生byte流

## qutum.parser.Lexier

词法解析器，读取byte流，产生`Lexi`流，行列定位，DFA算法

以`key`标识词，每词为一或多组，每组并列一或多分支，每分支为一或多字节（或字节范围、转义）
- 依次匹配每组，组内匹配某分支，贪婪匹配
- 组第一分支可空：其他分支不匹配时匹配空分支
- 组可选重试：各分支不匹配时，略过一字节（此字节在匹配结果中，且报错）重试组
- 分支可选循环：此分支匹配后循环此组
- 字节可选重复：此字节可连续匹配多个
- 第一组固定为重试 且分支不可重复（避免匹配其他词）

默认字节范围为 编码32-126及 `\t\n\r`
- 转义：`\s`空格 `\t\n\r` `\d`数字 `\x`十六进制 `\a`字母 `\b`任意字节 `\B`编码128以上

## qutum.parser.Synter & qutum.parser.SerMaker

语法解析器，读取`Lexer`，基于LR算法，产生语法树；
语法解析生成器，读取文法，产生语法解析参数

以`name`标识生成式，每生成式并列无或多分支，每分支为无或多内容，每内容为一词`key`或一生成式`name`

冲突解决
- 移位、化简 同一或多分支，则为冲突
- 每分支可选：拒绝、左结合、右结合、同前分支
- 拒绝：此分支涉及的冲突，均不解决
- 左解法：移位或化简 在更后的分支，同一分支化简（左结合）
- 右解法：移位或化简 在更后的分支，同一分支移位（右结合）
- 同前分支：解决方式、前后 均与前分支相同

错误恢复
- 每分支可选错误恢复，最后内容为词`key`，作为恢复词
- 解析错误时，已匹配主词的（或无主词）可恢复分支，作为候选
- 错误词前 尝试插入恢复词，恢复等待恢复词的分支
- 寻找后方恢复词，恢复在解析栈更近 且在更后的分支

错误信息
- 只选择已匹配主词的（或无主词）分支
- 优先至劣后：有标题、范围更广、匹配内容中点更后、在更后的分支
- 选择一或二分支产生错误信息，更多分支产生...
- 读取超出文法尾 产生错误信息

语法节点
- 每分支可选内容中一词为主词，主词存入节点
- 每一内容为一节点 或一节点串，分支与内容作为上下节点 形成语法树
- 每分支可选节点：产生、忽略、左提升、右提升
- 产生：产生一节点，为各内容下节点的上节点
- 忽略：各内容成一节点串，作为上节点一内容处理
- 左提升：把最左内容提升为 左节点或串，产生一右节点，为其余内容的上节点，左右节点成串
- 右提升：把最右内容提升为 右节点或串，产生一左节点，为其余内容的上节点，左右节点成串
- 节点`name` 可不同于生成式

## qutum.parser.SynterStr

读取`LerStr`的语法解析器
